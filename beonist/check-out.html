<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
<style>
    .first-footer{
        bottom: 0!important;
    }
    .secondary-footer{
        display: none;
    }
    .cart-value{
        background-color: green!important;
        color: #fff!important;
    }
    @media (min-width: 993px){
        .cart-value{
            top: 50px!important;
        }
        .fixed-bill{
            top: 130px!important;
        }
        .measurements-cart>div {
    flex-basis: calc(19% - 17px)!important;
    }}


    .mat-label {
    display: block;
    font-size: 16px;
    transform: translateY(25px);
    /* color: #e2e2e2; */
    transition: all 0.5s;
    }

    .mat-input {
    position: relative;
    background: transparent;
    width: 100%;
    border: none;
    outline: none;
    padding: 8px 0;
    font-size: 16px;
    }

    .mat-div {
    padding: 30px 0 0 0;
    position: relative;
    }

    .mat-div:after, .mat-div:before {
    content: "";
    position: absolute;
    display: block;
    width: 100%;
    height: 2px;
    background-color: #e2e2e2; 
    bottom: 0;
    left: 0;
    transition: all 0.5s;
    }

    .mat-div::after {
    background-color:#3f84f0;
    transform: scaleX(0);
    }

    .is-active::after {
    transform: scaleX(1);
    }

    .is-active .mat-label {
    color:#3f84f0;
    }

    .is-completed .mat-label {
    font-size: 12px;
    transform: translateY(0);
    }
</style>
</head>

<body>
    <header class="header"> 
        <div class="header-wrap">      
            <nav id="nav-large" chi-include-html="menu.html"></nav>
        </div>
    </header>

    <section>
        <div class="wrap">
            <div class="progressbar-container">
                <ul class="progressbar">
                    <li>Đăng nhập/Đăng ký</li>
                    <!-- <li>Địa chỉ giao hàng</li> -->
                    <li>Thanh toán & Đặt mua</li>    
                </ul>
            </div>
        </div>
        <div class="cart-wrap wrap" style="min-height: unset">
            <div class="cart-info"></div>
            <div class="cart-value">
                <h3>Mã giảm giá: <span id="discount-code"></span></h3>
                <h3>Tổng tiền: <span id="bill-value"></span>VNĐ</h3>
            </div>
        </div>
            <div class="login-signup">
                <button class="btn-active btn-login">Đăng nhập</button><button class="btn-signup">Đăng ký</button>
                <div class="login-container">
                    <form class="login">
                            <div class="mat-div">
                              <label for="username" class="mat-label">Email/Tên đăng nhập</label>
                              <input type="text" class="mat-input" id="username1">
                            </div>
                            
                              <div class="mat-div">
                              <label for="first-name" class="mat-label">Mật khẩu</label>
                              <input type="password" class="mat-input" id="password1">
                            </div>
                          
                        <button type="button" class="move-to-payment">Đăng nhập</button><br/>
                        <a href="#">Quên mật khẩu?</a>
                    </form>
                </div>

                <div class="signup-container">
                    <form class="signup">
                            <div class="mat-div">
                                <label for="username" class="mat-label">Email/Tên đăng nhập</label>
                                <input type="text" class="mat-input" id="username2">
                              </div>
                              
                                <div class="mat-div">
                                <label for="first-name" class="mat-label">Mật khẩu</label>
                                <input type="password" class="mat-input" id="password2">
                              </div> 
                              
                              <div class="mat-div">
                                <label for="first-name" class="mat-label">Xác nhận mật khẩu</label>
                                <input type="password" class="mat-input" id="password-confirm">
                              </div> 
                            <button type="button" class="move-to-payment">Đăng ký</button>
                    </form>
                </div>
            </div>

    
    </section>
    <footer chi-include-html="footer.html"></footer>
        



    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="script/script.js"></script>
    <script src="script/order.js"></script>
    <script>
        let orderInfo = JSON.parse(localStorage.getItem("productGroup"));
        let groupPrice = [];
        $(document).ready(function() {
            for(var i=0; i < orderInfo.length; i++ ){
                $(".number-of-items").text('( ' + orderInfo.length + ' sản phẩm)');
                $(".cart-info").append($('<div class="item-info"><div class="product-image-cart"><img src="'+orderInfo[i].productImage+'"/></div><div class="cart-content">'+
                    '<div class="name-quantity-price"><h3 class="product-name-cart"> '+orderInfo[i].productQuantity+'x '+orderInfo[i].productName+'</h3>'+
                    '<p class="sodo">SỐ ĐO (cm): </p>'+
                    '<div class="measurements-cart"><div>Cổ: '+orderInfo[i].neck+'</div>'+ 
                    '<div>Ngực: '+orderInfo[i].chest+'</div><div>Eo: '+orderInfo[i].belly+'</div>'+ 
                    '<div>Vai: '+orderInfo[i].shoulder+'</div><div>Dài tay: '+orderInfo[i].arm+'</div>'+ 
                    '<div>Bắp tay: '+orderInfo[i].biceps+'</div><div>Lưng: '+orderInfo[i].back+'</div>'+ 
                    '<div>Mông: '+orderInfo[i].butt+'</div><div>Đùi: '+orderInfo[i].thigh+'</div>'+ 
                    '<div>Gối: '+orderInfo[i].knee+'</div><div>Dài quần: '+orderInfo[i].pantLength+'</div></div></div>'

                ))
                        
                let priceString;
                priceString= orderInfo[i].productPrice.match(/\d/g).join("");
                
                let price=parseInt(priceString);
                groupPrice.push(price);

            }
            let totalValue = 0;
                totalValue = groupPrice.reduce(function(a, b) { return a + b; }, 0);
                $('#bill-value').text(totalValue.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "."));

        
        })


        $('.btn-signup').click(function(){
            $('.btn-login').removeClass('btn-active');
            $('.btn-signup').addClass('btn-active');
            $('.signup').css('display', 'block');
            $('.login').css('display', 'none');
        })

        $('.btn-login').click(function(){
            $('.btn-signup').removeClass('btn-active');
            $('.btn-login').addClass('btn-active');
            $('.signup').css('display', 'none');
            $('.login').css('display', 'block');
        })

        $('.move-to-payment').click(function(){
                    location.href = "payment.html";
                });
        
        $(window).scroll(function(){
        if (document.body.scrollTop > 250 || document.documentElement.scrollTop > 250) {
            $('.cart-value').addClass('fixed-bill');
        }
        else{
            $('.cart-value').removeClass('fixed-bill');
        }
    })

            $(".mat-input").focus(function(){
                $(this).parent().addClass("is-active is-completed");
            });

            $(".mat-input").focusout(function(){
            if($(this).val() === "")
                $(this).parent().removeClass("is-completed");
            $(this).parent().removeClass("is-active");
            })
            
    </script>
        <script>
            includeHTML();
        </script>
</body>
</html>