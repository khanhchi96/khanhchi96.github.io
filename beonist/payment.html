<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Thanh toán</title>
    <link rel="icon" href="img/logo-dark-background.png" type="image/gif" sizes="15x15">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
<style>
    #product-list::after{
    content: '';
    display: block;
    bottom: 0;
    border-bottom: 4px solid #fff!important;
    width: 100%!important;
    }

    .first-footer{
        bottom: 0!important;
    }
    .secondary-footer{
        display: none;
    }
    .active{
        background-color: transparent!important;
    }
    .row{
        margin-bottom: 30px!important;
    }

    .input-field.col{
        width: 70%;
    }

    .cart-value{
        background-color: green!important;
        color: #fff!important;
    }
    @media (min-width: 993px){
        .cart-value{
            top: 50px!important;
        }
        .fixed-bill{
            top: 130px!important;
        }
        .measurements-cart>div {
    flex-basis: calc(19% - 17px)!important;
        }
    }

    .helper-text{
        color: red!important;
        text-align: right;
    }

</style>
</head>
<body>
    <header class="header"> 
        <div class="header-wrap">      
            <nav id="nav-large" chi-include-html="menu.html"></nav>
        </div>
    </header>

    <section style="margin-bottom: 50px;">
        <div class="wrap">
            <div class="progressbar-container">
                <ul class="progressbar">
                    <style scoped>
                        @media (max-width: 992px){
                            .progressbar>li:before {
                                height: 25px!important;
                                width: 25px!important;
                                line-height: 25px;
                            }
                        }
                        .step1::after{
                                content: none!important;
                            }
                    </style>
                    <li class="step1 progress-active">Đăng nhập/Đăng ký</li>
                    <!-- <li class="step2">Địa chỉ giao hàng</li> -->
                    <li class="step3">Thanh toán & Đặt mua</li>    
                </ul>
            </div>
        </div>


        <div class="wrap payment-wrap">
                    <form class="payment">
                        <h1>Địa chỉ giao hàng</h1>

                    <div class="row">
                        <div class="input-field col">
                          <input id="customer-name" type="text" class="validate" pattern="^[a-zA-Z ]+$">
                          <label for="customer-name">Họ tên khách hàng</label>
                          <span class="helper-text" data-error="wrong" data-success="right"></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="input-field col">
                          <input id="customer-address" type="text" class="validate">
                          <label for="customer-address">Địa chỉ</label>
                          <span class="helper-text" data-error="wrong" data-success="right"></span>
                        </div>
                    </div>

                    <div class="row">
                        <div class="input-field col">
                          <input id="customer-phone" type="text" class="validate" pattern="^[0]{1}[19]{1}[0-9]{8,9}$">
                          <label for="customer-phone">Số điện thoại</label>
                          <span class="helper-text" data-error="wrong" data-success="right"></span>
                        </div>
                    </div>


                        <h1>Phương thức thanh toán</h1><span class="warning"></span>

                        <p>
                            <label>
                              <input name="payment"  value = "Chuyển khoản ngân hàng" type="radio" onclick="show1()" />
                              <span>Chuyển khoản ngân hàng</span>
                            </label>
                            
                            <div class="transfer-info">
                                <p>THÔNG TIN CHUYỂN KHOẢN:</p>
                                <p>STK: 0011004215063<br>Chủ tài khoản: PHUNG KHANH CHI<br/> Ngân hàng: Vietcombank Chi nhánh Chùa Láng</p>
                            </div>
                        </p>

                        <p>
                            <label>
                              <input name="payment" value ="Thẻ ngân hàng" type="radio" id ="bank-card" onclick="show2()" />
                              <span>Thẻ ngân hàng</span>
                            </label>

                            <div class="bank-card-option">
                                <label>     
                                    <input name="card" type="radio" id="visa" onclick="show4()" />
                                    <span><i class="fab fa-cc-visa"></i></span>
                                </label> 
                                
                                <label>     
                                    <input name="card" type="radio" id="mastercard" onclick="show4()" />
                                    <span><i class="fab fa-cc-mastercard"></i></span>
                                </label> 

                                <label>     
                                    <input name="card" type="radio" id="amex" onclick="show4()" />
                                    <span><i class="fab fa-cc-amex"></i></span>
                                </label> 

                                <label>     
                                    <input name="card" type="radio" id="domestic" onclick="show4()" />
                                    <span>Thẻ ngân hàng nội địa</span>
                                </label> 
                            </div>    
                                <div class="bank-card-info">
                                        <div class="row">
                                            <div class="input-field col">
                                              <input id="number" type="text" pattern="^((67\d{2})|(4\d{3})|(5[1-5]\d{2})|(6011))-?\s?\d{4}-?\s?\d{4}-?\s?\d{4}|3[4,7]\d{13}$" class="validate">
                                              <label for="number">Số thẻ</label>
                                              <span class="helper-text" data-error="wrong" data-success="right"></span>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="input-field col">
                                              <input id="name" type="text" pattern="[A-Z ]+" class="validate">
                                              <label for="name">Tên chủ thẻ</label>
                                              <span class="helper-text" data-error="wrong" data-success="right"></span>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="input-field col">
                                              <input id="date" type="text" pattern="(((0[123456789]|10|11|12)([/])(([1][9][0-9][0-9])|([2][0-9][0-9][0-9]))))" class="validate">
                                              <label for="date">Ngày hết hạn</label>
                                              <span class="helper-text" data-error="wrong" data-success="right"></span>
                                            </div>
                                        </div>
                                </div>
                        </p>
                        <p>
                            <label>
                              <input name="payment" type="radio" value="Ví điện tử" id="e-wallet" onclick="show3()" />
                              <span>Ví điện tử</span>
                            </label>
                        </p>
                        <button type="button" id="complete">Tiến hành đặt hàng</button><br/>
                    </form>
            </div>

    
    </section>
    <footer chi-include-html="footer.html"></footer>
        



    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="script/script.js"></script>
    <script src="script/validation.js"></script>
    <script>

        $('input[name=payment]').click(function(){
                $('.warning').text('')
        })
        $('#customer-address').keydown(function(){
            $('#customer-address').siblings('span').text('')
        })
        $('#customer-name').keydown(function(){
            $('#customer-name').siblings('span').text('')
        })
        $('#customer-phone').keydown(function(){
            $('#customer-phone').siblings('span').text('')
        })
        $('#name').keydown(function(){
            $('#name').siblings('span').text('')
        })
        $('#number').keydown(function(){
            $('#number').siblings('span').text('')
        })
        $('#date').keydown(function(){
            $('#date').siblings('span').text('')
        })

    let customerInfo = {};

    $('#complete').click(function (e) {
            validationInfo();
            validationPayment();
            let isValid = true;
            if (!$("input[name='payment']:checked").val()) {
                $('.warning').text('Hãy chọn phương thức thanh toán!');
                isValid = false;   
            } 
        if (isValid == false){e.preventDefault();}
        else {
            customerInfo = JSON.parse(localStorage.getItem('customerInfo')) || {};
            customerInfo.name = $('#customer-name').val();
            customerInfo.address = $('#customer-address').val();
            customerInfo.phone = $('#customer-phone').val();
            customerInfo.paymentMethod = $("input[name='payment']:checked").val();
            localStorage.setItem('customerInfo', JSON.stringify(customerInfo));
            window.location.href = "confirm.html";
        }
    })

    function show1(){
        $('.transfer-info').css('display', 'block');
        $('.bank-card-option').css('display', 'none');
        $('.bank-card-info').css('display', 'none');
        scrollBottom();
    }
    function show2(){
        $('.bank-card-option').css('display', 'block');
        $('.transfer-info').css('display', 'none');
        scrollBottom();
    }

    function show3(){
        $('.transfer-info').css('display', 'none');
        $('.bank-card-option').css('display', 'none');
        $('.bank-card-info').css('display', 'none');
    }

    function show4(){
        $('.bank-card-info').css('display', 'block');
        scrollBottom();
    }
            
    </script>
        <script>
            includeHTML();
        </script>
</body>
</html>